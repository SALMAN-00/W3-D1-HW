const news=window.landingData.news,newsFixed=window.landingData.newsFixed,newsLastPage=parseInt(window.landingData.newsLastPage),partners=window.landingData.partners;let nextVideo=0;const mangeVideo=()=>{document.addEventListener("DOMContentLoaded",(()=>{function e(){var t;nextVideo===$("video").length&&(nextVideo=0),t=nextVideo,$("video").each((function(s,i){let a=$(i),n=a[0];a.off("ended"),a.fadeOut("fast"),t===s&&(n.load(),n.play(),a.fadeIn("fast"),a.on("ended",e))})),nextVideo++}e()}))},incEltNbr=(e,t)=>{let s;void 0===t&&(t=10);let i=document.getElementById(e),a=Number(null===(s=document.getElementById(e))||void 0===s?void 0:s.innerHTML);incNbrRec(0,a,i,t)},incNbrRec=(e,t,s,i)=>{e<=t?(s.innerHTML=e.toString(),setTimeout((function(){incNbrRec(t>1e6?e+1e5:t>1e5?e+1e3:t>1e4?e+100:t>1e3?e+10:e+1,t,s,i)}),i)):s.innerHTML=t.toLocaleString()};mangeVideo(),document.addEventListener("alpine:init",(()=>{Alpine.data("mainHomeData",(()=>({isLoadingCourses:!0,isLoadingNews:!1,courses:null,fixedNews:newsFixed,latestNews:news,news:news,moreNewsLoading:!1,canLoadMoreNews:!0,certificates:null,partners:partners,fName:"",lName:"",email:"",currentPage:0,numbersOfAcademyStarted:!1,async init(){try{const e=this.Get("api/GetInitiativePublishesShorten/3/1?type=NORMAL"),t=this.Get("api/GetInitiativePublishesShorten/3/1?type=JUNIOR"),s=this.Get("/Api/GetFixedNews/5/1"),i=this.Get("/Api/GetNews/3/1/"),a=this.Get("/Api/GetPartners"),[n,o,r,d,c]=await Promise.all([s,i,a,t,e]);this.courses=c.data,this.courses=this.courses.concat(d.data),this.courses=this.courses.filter((e=>e.isRegistrationOpen)),this.courses=this.courses.slice(0,3),$(window).scroll((()=>{checkVisible($("#numbersOfAcademy"))&&!this.numbersOfAcademyStarted&&(this.numbersOfAcademyStarted=!0,incEltNbr("counter1",2),incEltNbr("counter2",8),incEltNbr("counter3",4),incEltNbr("counter4",1))})),this.isLoadingCourses=!1,this.currentPage<newsLastPage?this.canLoadMoreNews=!0:this.canLoadMoreNews=!1,this.isLoadingNews=!1,this.currentPage=1,this.isLoadingNews=!1,$("#partners-carousel").owlCarousel({margin:10,nav:!1,rtl:!0,dots:!1,loop:!0,autoplayHoverPause:!0,autoplay:!0,responsive:{0:{items:1},600:{items:3},1e3:{items:4}}}),this.fixedNews.length>1&&$("#fixedNews-carousel").owlCarousel({rtl:!0,items:1,loop:!0,autoplay:!0,autoplayHoverPause:!0,dots:!1})}catch(e){console.log(e)}},async loadMoreNews(){let e=document.getElementById("newsList");this.moreNewsLoading=!0,this.currentPage++;const t=await this.Get(`/Api/GetNews/3/${this.currentPage}`);this.currentPage<t.pagination.totalPages?this.canLoadMoreNews=!0:this.canLoadMoreNews=!1,this.latestNews=[...this.latestNews,...t.data],this.moreNewsLoading=!1,setTimeout((()=>{e.scrollTop=e.scrollHeight}),150)},getMoreLink:e=>"<a class='mx-3 underline hover:text-blue-600' href='/news/"+e+"' class='mx-3'>المزيد</a>",async subscriptNewsLetter(){if(!(this.fName.trim()&&this.lName.trim()&&this.email.trim()&&validateEmail(this.email.trim())))return void errorToast("الرجاء إكمال جميع الحقول");if(navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS"))return void errorToast("الرجاء إستخدام متفصح اخر لإتمام الإشتراك");const e=new Headers;e.append("Content-Type","application/x-www-form-urlencoded");const t=new URLSearchParams;t.append("MERGE0",this.email.trim()),t.append("MERGE1",this.fName.trim()),t.append("MERGE2",this.lName.trim()),t.append("u","21c09350ef6ca08617d67189e"),t.append("id","914eb19379");fetch("https://safcsp.us18.list-manage.com/subscribe/post",{method:"POST",headers:e,body:t,redirect:"follow"}).catch((e=>{"Failed to fetch"===e.message&&(successToast("تم الإشتراك بنجاح"),this.fName="",this.lName="",this.email="")}))}})))}));